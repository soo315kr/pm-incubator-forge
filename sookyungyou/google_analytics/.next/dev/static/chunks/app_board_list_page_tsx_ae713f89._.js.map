{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/lecture/pm-incubator-forge/sookyungyou/google_analytics/app/board/list/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\ninterface Board {\r\n    id: number;\r\n    title: string;\r\n    content: string;\r\n    author_nickname: string;\r\n    created_at: string; // ISO 문자열\r\n}\r\n\r\nexport default function BoardList() {\r\n    const [boards, setBoards] = useState<Board[]>([]);\r\n    const [page, setPage] = useState(1);\r\n    const [size] = useState(10);\r\n    const [total, setTotal] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const loadBoards = async (page: number) => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch(\r\n                `${process.env.NEXT_PUBLIC_API_BASE_URL}/board/list?page=${page}&size=${size}`,\r\n                { credentials: \"include\" }\r\n            );\r\n            if (!res.ok) {\r\n                console.error(\"Failed to fetch boards\", res.status);\r\n                setBoards([]);\r\n                setTotal(0);\r\n                return;\r\n            }\r\n            const data = await res.json();\r\n            console.log(\"Fetched board list:\", data); // 디버깅용\r\n            setBoards(data.boards);\r\n            setTotal(data.total);\r\n        } catch (err) {\r\n            console.error(\"Error loading boards:\", err);\r\n            setBoards([]);\r\n            setTotal(0);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadBoards(page);\r\n    }, [page]);\r\n\r\n    const totalPages = Math.ceil(total / size);\r\n\r\n    return (\r\n        <div className=\"p-6 min-h-screen bg-white text-black\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">게시판 목록</h1>\r\n\r\n            <Link\r\n                href=\"/board/create\"\r\n                className=\"bg-blue-600 px-4 py-2 rounded text-white hover:bg-blue-700\"\r\n            >\r\n                글쓰기\r\n            </Link>\r\n\r\n            {loading ? (\r\n                <p className=\"mt-4\">로딩 중...</p>\r\n            ) : boards.length === 0 ? (\r\n                <p className=\"mt-4\">게시글이 없습니다.</p>\r\n            ) : (\r\n                <table className=\"w-full mt-4 border border-gray-300 text-left\">\r\n                    <thead className=\"bg-gray-100\">\r\n                    <tr>\r\n                        <th className=\"p-2 border-b\">번호</th>\r\n                        <th className=\"p-2 border-b\">제목</th>\r\n                        <th className=\"p-2 border-b\">작성자</th>\r\n                        <th className=\"p-2 border-b\">작성일</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {boards.map((b, idx) => (\r\n                        <tr key={b.id} className=\"hover:bg-gray-50\">\r\n                            <td className=\"p-2 border-b\">{b.id}</td>\r\n                            <td className=\"p-2 border-b\">\r\n                                <Link\r\n                                    href={`/board/${b.id}`}\r\n                                    className=\"text-blue-500 hover:underline\"\r\n                                >\r\n                                    {b.title}\r\n                                </Link>\r\n                            </td>\r\n                            <td className=\"p-2 border-b\">{b.author_nickname}</td>\r\n                            <td className=\"p-2 border-b\">\r\n                                {new Date(b.created_at).toLocaleString()}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    </tbody>\r\n                </table>\r\n            )}\r\n\r\n            {/* 페이지네이션 */}\r\n            <div className=\"mt-4 flex justify-center items-center space-x-4\">\r\n                <button\r\n                    disabled={page <= 1}\r\n                    onClick={() => setPage(page - 1)}\r\n                    className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                    Prev\r\n                </button>\r\n                <span>\r\n                    {page} / {totalPages}\r\n                </span>\r\n                <button\r\n                    disabled={page >= totalPages}\r\n                    onClick={() => setPage(page + 1)}\r\n                    className=\"px-3 py-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                    Next\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAwBmB;;AAtBnB;AACA;;;AAHA;;;AAae,SAAS;;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,GAAG,IAAA,yKAAQ,EAAC;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,aAAa,OAAO;QACtB,WAAW;QACX,IAAI;YACA,MAAM,MAAM,MAAM,MACd,wCAAwC,iBAAiB,EAAE,KAAK,MAAM,EAAE,MAAM,EAC9E;gBAAE,aAAa;YAAU;YAE7B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,QAAQ,KAAK,CAAC,0BAA0B,IAAI,MAAM;gBAClD,UAAU,EAAE;gBACZ,SAAS;gBACT;YACJ;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,GAAG,CAAC,uBAAuB,OAAO,OAAO;YACjD,UAAU,KAAK,MAAM;YACrB,SAAS,KAAK,KAAK;QACvB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,yBAAyB;YACvC,UAAU,EAAE;YACZ,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,0KAAS;+BAAC;YACN,WAAW;QACf;8BAAG;QAAC;KAAK;IAET,MAAM,aAAa,KAAK,IAAI,CAAC,QAAQ;IAErC,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,6LAAC,0KAAI;gBACD,MAAK;gBACL,WAAU;0BACb;;;;;;YAIA,wBACG,6LAAC;gBAAE,WAAU;0BAAO;;;;;uBACpB,OAAO,MAAM,KAAK,kBAClB,6LAAC;gBAAE,WAAU;0BAAO;;;;;qCAEpB,6LAAC;gBAAM,WAAU;;kCACb,6LAAC;wBAAM,WAAU;kCACjB,cAAA,6LAAC;;8CACG,6LAAC;oCAAG,WAAU;8CAAe;;;;;;8CAC7B,6LAAC;oCAAG,WAAU;8CAAe;;;;;;8CAC7B,6LAAC;oCAAG,WAAU;8CAAe;;;;;;8CAC7B,6LAAC;oCAAG,WAAU;8CAAe;;;;;;;;;;;;;;;;;kCAGjC,6LAAC;kCACA,OAAO,GAAG,CAAC,CAAC,GAAG,oBACZ,6LAAC;gCAAc,WAAU;;kDACrB,6LAAC;wCAAG,WAAU;kDAAgB,EAAE,EAAE;;;;;;kDAClC,6LAAC;wCAAG,WAAU;kDACV,cAAA,6LAAC,0KAAI;4CACD,MAAM,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE;4CACtB,WAAU;sDAET,EAAE,KAAK;;;;;;;;;;;kDAGhB,6LAAC;wCAAG,WAAU;kDAAgB,EAAE,eAAe;;;;;;kDAC/C,6LAAC;wCAAG,WAAU;kDACT,IAAI,KAAK,EAAE,UAAU,EAAE,cAAc;;;;;;;+BAZrC,EAAE,EAAE;;;;;;;;;;;;;;;;0BAqBzB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,UAAU,QAAQ;wBAClB,SAAS,IAAM,QAAQ,OAAO;wBAC9B,WAAU;kCACb;;;;;;kCAGD,6LAAC;;4BACI;4BAAK;4BAAI;;;;;;;kCAEd,6LAAC;wBACG,UAAU,QAAQ;wBAClB,SAAS,IAAM,QAAQ,OAAO;wBAC9B,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAMjB;GA5GwB;KAAA"}}]
}