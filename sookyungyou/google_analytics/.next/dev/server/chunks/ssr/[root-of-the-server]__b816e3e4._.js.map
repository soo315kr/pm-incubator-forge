{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/lecture/pm-incubator-forge/sookyungyou/google_analytics/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, ReactNode, useEffect } from \"react\";\r\n\r\ninterface AuthContextType {\r\n    isLoggedIn: boolean;\r\n    refresh: () => void;\r\n    logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    isLoggedIn: false,\r\n    refresh: () => {},\r\n    logout: () => {},\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n    const refresh = () => {\r\n        console.log(\"[Auth] Checking login status...\");\r\n        fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/authentication/status`, {\r\n            credentials: \"include\",\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                console.log(\"[Auth] Status API response:\", data);\r\n                setIsLoggedIn(data.logged_in);\r\n            })\r\n            .catch((err) => {\r\n                console.error(\"[Auth] Status check failed:\", err);\r\n                setIsLoggedIn(false);\r\n            });\r\n    };\r\n\r\n    const logout = () => {\r\n        console.log(\"[Auth] Logging out...\");\r\n        fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/authentication/logout`, {\r\n            method: \"POST\",\r\n            credentials: \"include\",\r\n        }).finally(() => {\r\n            setIsLoggedIn(false);\r\n        });\r\n    };\r\n\r\n    // 처음 로딩될 때 1번만 실행\r\n    useEffect(() => {\r\n        refresh();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ isLoggedIn, refresh, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAUA,MAAM,4BAAc,IAAA,sNAAa,EAAkB;IAC/C,YAAY;IACZ,SAAS,KAAO;IAChB,QAAQ,KAAO;AACnB;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAC9D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,UAAU;QACZ,QAAQ,GAAG,CAAC;QACZ,MAAM,wCAAwC,sBAAsB,CAAC,EAAE;YACnE,aAAa;QACjB,GACK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACH,QAAQ,GAAG,CAAC,+BAA+B;YAC3C,cAAc,KAAK,SAAS;QAChC,GACC,KAAK,CAAC,CAAC;YACJ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,cAAc;QAClB;IACR;IAEA,MAAM,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,MAAM,wCAAwC,sBAAsB,CAAC,EAAE;YACnE,QAAQ;YACR,aAAa;QACjB,GAAG,OAAO,CAAC;YACP,cAAc;QAClB;IACJ;IAEA,kBAAkB;IAClB,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAY;YAAS;QAAO;kBACtD;;;;;;AAGb;AAEO,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/lecture/pm-incubator-forge/sookyungyou/google_analytics/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Navbar() {\r\n    const { isLoggedIn, logout } = useAuth();\r\n    const router = useRouter();\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n        router.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <nav className=\"bg-gray-800 text-white p-4 flex justify-between items-center\">\r\n            <div className=\"text-lg font-bold\">\r\n                <Link href=\"/\">MyApp</Link>\r\n            </div>\r\n\r\n            <div className=\"space-x-4 flex items-center\">\r\n                <Link href=\"/\">Home</Link>\r\n                <Link href=\"/documents/list\">문서 분석</Link>\r\n                <Link href=\"/contact\">Contact</Link>\r\n                <Link href=\"/board/list\">게시판</Link>\r\n\r\n                {/* 구독 버튼 추가 */}\r\n                {isLoggedIn && (\r\n                    <Link href=\"/payment/checkout\">\r\n                        <button className=\"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700\">\r\n                            구독\r\n                        </button>\r\n                    </Link>\r\n                )}\r\n\r\n                {isLoggedIn ? (\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        className=\"bg-red-600 px-3 py-1 rounded hover:bg-red-700\"\r\n                    >\r\n                        Logout\r\n                    </button>\r\n                ) : (\r\n                    <Link\r\n                        href=\"/login\"\r\n                        className=\"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700\"\r\n                    >\r\n                        Login\r\n                    </Link>\r\n                )}\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,mIAAO;IACtC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,eAAe;QACjB;QACA,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,uKAAI;oBAAC,MAAK;8BAAI;;;;;;;;;;;0BAGnB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uKAAI;wBAAC,MAAK;kCAAI;;;;;;kCACf,8OAAC,uKAAI;wBAAC,MAAK;kCAAkB;;;;;;kCAC7B,8OAAC,uKAAI;wBAAC,MAAK;kCAAW;;;;;;kCACtB,8OAAC,uKAAI;wBAAC,MAAK;kCAAc;;;;;;oBAGxB,4BACG,8OAAC,uKAAI;wBAAC,MAAK;kCACP,cAAA,8OAAC;4BAAO,WAAU;sCAAkD;;;;;;;;;;;oBAM3E,2BACG,8OAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;6CAID,8OAAC,uKAAI;wBACD,MAAK;wBACL,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAOrB"}}]
}